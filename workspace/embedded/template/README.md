# 模板文件

*此文件夹用于存放模板文件，代码解析过程中一律使用模板文件说明的规则来翻译程序描述文件以生成最后代码。*

## 模板文件设计思路

模板规则按目前设计分为以下几个部分，不同模板文件应用不同文件进行编写，：

- `框架模板`：用于生成基础项目框架的模板文件，`框架模板`不需要`程序描述文件`就可以直接被解析，生成结果应为多个文件夹与文件的组合。`框架模板`的文件扩展名为`.bgFrame`。

- `标签模板`：在设计过程中既定的模板，`程序描述文件`根据`标签模板`的需要，在同一大类的多个条目组前打上`定位标签`，而解析程序在遇到该`定位标签`时会找到`框架模板`中打了对应`定位标签`的位置，并执行相应操作。`标签模板`的主要功能为定位，在此期间可能会执行修改文件读写指针位置或新建文件、文件夹等操作。`标签模板`没有单独的文件扩展名，但应当在商讨后于`preference`中记录所有应有的`定位标签`。

- `规则模板`：在通过`标签模板`新建文件夹、文件以及将文件读写指针调度到制定位置后，我们将对`程序解析文件`中同一大类的每个条目进行解析并生成代码，每个条目将会拥有一个`规则标签`，不同`规则标签`代表了不同的解析翻译规则，解析程序将会以不同的方法解析生成代码。`规则模板`没有单独的文件扩展名，但应当在商讨后与`preference`中记录所有应有的`规则标签`。

## 举例

*因为此部分内容仍在设计中，所以只举出不完整的部分例子，但在实际操作中可能会需要修改。*

### 框架模板

本示例为假设在本平台中添加windows平台的一个框架。

```bgFrame
# example.bgFrame
$PLATFORM(windows-x64)
SRC := src
$DIR(SRC, inc, build)
MAIN := src/main.c
$FILE(@MAIN)
```@MAIN
int main(int argc, char *argv[])
{
    return 0;
}
```
```

*上述内容并非已经定版的框架模板写法，只是作为理解的一种举例，同时也是当前暂时的一种方案，如果未来有更好的方案，这里的示例将会进行修改*

上述举例中：

- 以`#`开头的内容为注释，一个`#`只能注释当前行，且只有在行首写`#`才可。

- 以`$`开头的内容为方法，不同方法有不同的解析方案，例如`$PLATFORM`方法的作用为标定模板所属平台，而`$DIR`方法则为从项目文件夹根目录下创建新文件夹，参数为可变的，每个参数均为新建文件夹与项目根目录的相对地址。

- 以不带\$的字符开头，且后以`:=`进行连接的内容为宏定义，解析时，符号前的变量将被符号后的文本替代，在调用宏定义变量时需要使用`@`标注。

- 通过\`\`\`框住的内容为文本模板，该内容将会写在第一个\`\`\`后所标记的文件里。

**本框架模板中尚未添加定位标签！**

## 文件夹

- `Espressif`：乐鑫公司，主要产品ESP32、ESP8266等

- `STM`：意法半导体公司，主要产品STM32、STM8等
